---
page_title: "talos_machine_configuration_apply Resource - talos"
subcategory: ""
description: |-
  Apply a machine configuration to a node.
---

# talos_machine_configuration_apply (Resource)

Apply a machine configuration to a node.

## Example Usage

```terraform
resource "talos_machine_secrets" "this" {}

data "talos_machine_configuration" "this" {
  cluster_name     = "example-cluster"
  type             = "controlplane"
  cluster_endpoint = "https://cluster.local:6443"
  machine_secrets  = talos_machine_secrets.this.machine_secrets
}

data "talos_client_configuration" "this" {
  cluster_name         = "example-cluster"
  client_configuration = talos_machine_secrets.this.client_configuration
  node                 = ["10.5.0.2"]
}

resource "talos_machine_configuration_apply" "this" {
  client_configuration  = talos_machine_secrets.this.client_configuration
  machine_configuration = data.talos_machine_configuration.this.machine_configuration
  node                  = "10.5.0.2"
  config_patches = [{
    machine = {
      install = {
        disk = "/dev/sdd"
      }
    }
  }]
}
```
<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `client_configuration` (Attributes) The client configuration to use when connecting to the talos node (see [below for nested schema](#nestedatt--client_configuration))
- `machine_configuration` (String, Sensitive) The machine configuration to apply to the talos node.
- `node` (String) The node to apply the configuration to.

### Optional

- `config_patches` (List of Dynamic) The patches to apply to the generated talos configuration
- `endpoint` (String) The endpoint for the talos client. If not specified, the node will be used as the endpoint.
- `mode` (String) The mode in which to apply the configuration.

### Read-Only

- `id` (String) The ID of this resource.
- `machine_configuration_final` (String, Sensitive) The final machine configuration after applying the patches.

<a id="nestedatt--client_configuration"></a>
### Nested Schema for `client_configuration`

Required:

- `ca_certificate` (String) The CA certificate to use when connecting to the talos node.
- `client_certificate` (String) The client certificate to use when connecting to the talos node.
- `client_key` (String) The client key to use when connecting to the talos node.
